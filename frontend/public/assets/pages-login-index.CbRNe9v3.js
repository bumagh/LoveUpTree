import{c as e,w as s,a,b as t,h as l,s as i,i as o,o as n,e as d,k as c,g as r,j as u,I as p,u as h}from"./index-Cg44Emc2.js";import{_ as m,a as g,s as f}from"./_plugin-vue_export-helper.BNHJzMf4.js";const _=m({data:()=>({username:"",password:"",isLoading:!1}),methods:{async handleLogin(){if(this.validateForm()&&!this.isLoading){this.isLoading=!0,t({title:"ç™»å½•ä¸­...",mask:!0});try{const e=await g.login(this.username.trim(),this.password);e.success?(f.setToken("lovers_token_"+e.data.user_id),f.setUser(e.data),f.setPoints(e.data.points||0),a({title:"ç™»å½•æˆåŠŸ",icon:"success",duration:1500}),setTimeout(()=>{i({url:"/pages/index/index"})},1500)):a({title:e.message||"ç™»å½•å¤±è´¥",icon:"none",duration:2e3})}catch(e){console.error("ç™»å½•å¤±è´¥:",e),a({title:e.message||"ç™»å½•å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none",duration:2e3})}finally{this.isLoading=!1,l()}}},async handleRegister(){if(this.validateForm()&&!this.isLoading){this.isLoading=!0,t({title:"æ³¨å†Œä¸­...",mask:!0});try{const e=await g.register(this.username.trim(),this.password);e.success?(a({title:"æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•",icon:"success",duration:2e3}),this.password=""):a({title:e.message||"æ³¨å†Œå¤±è´¥",icon:"none",duration:2e3})}catch(e){console.error("æ³¨å†Œå¤±è´¥:",e),a({title:e.message||"æ³¨å†Œå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•",icon:"none",duration:2e3})}finally{this.isLoading=!1,l()}}},validateForm(){const e=this.username.trim(),s=this.password;return e?e.length<3||e.length>20?(a({title:"è´¦å·é•¿åº¦éœ€åœ¨3-20ä¸ªå­—ç¬¦ä¹‹é—´",icon:"none",duration:2e3}),!1):s?!(s.length<6)||(a({title:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä¸ªå­—ç¬¦",icon:"none",duration:2e3}),!1):(a({title:"è¯·è¾“å…¥å¯†ç ",icon:"none",duration:2e3}),!1):(a({title:"è¯·è¾“å…¥è´¦å·",icon:"none",duration:2e3}),!1)}}},[["render",function(a,t,l,i,m,g){const f=c,_=r,b=o,x=p,w=h;return n(),e(b,{class:"login-container"},{default:s(()=>[d(b,{class:"login-card"},{default:s(()=>[d(b,{class:"logo-section"},{default:s(()=>[d(f,{class:"logo-img",src:"https://hpi-hub.tos-cn-beijing.volces.com/static/biology/tree-8378346_1280.png",mode:"aspectFit"}),d(_,{class:"app-title"},{default:s(()=>[u("æ‹äººå¤æƒ…æ ‘")]),_:1}),d(_,{class:"app-subtitle"},{default:s(()=>[u("å®Œæˆä»»åŠ¡ Â· æ”¶è·å¹¸ç¦")]),_:1})]),_:1}),d(b,{class:"form-section"},{default:s(()=>[d(b,{class:"input-group"},{default:s(()=>[d(b,{class:"input-label"},{default:s(()=>[d(_,{class:"label-icon"},{default:s(()=>[u("ğŸ‘¤")]),_:1}),d(_,{class:"label-text"},{default:s(()=>[u("è´¦å·")]),_:1})]),_:1}),d(x,{class:"input-field",modelValue:m.username,"onUpdate:modelValue":t[0]||(t[0]=e=>m.username=e),placeholder:"è¯·è¾“å…¥è´¦å·","placeholder-class":"placeholder-text",maxlength:"20"},null,8,["modelValue"])]),_:1}),d(b,{class:"input-group"},{default:s(()=>[d(b,{class:"input-label"},{default:s(()=>[d(_,{class:"label-icon"},{default:s(()=>[u("ğŸ”’")]),_:1}),d(_,{class:"label-text"},{default:s(()=>[u("å¯†ç ")]),_:1})]),_:1}),d(x,{class:"input-field",modelValue:m.password,"onUpdate:modelValue":t[1]||(t[1]=e=>m.password=e),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç ","placeholder-class":"placeholder-text",maxlength:"20"},null,8,["modelValue"])]),_:1}),d(b,{class:"button-group"},{default:s(()=>[d(w,{class:"btn-primary",onClick:g.handleLogin},{default:s(()=>[u("ç™»å½•")]),_:1},8,["onClick"]),d(w,{class:"btn-secondary",onClick:g.handleRegister},{default:s(()=>[u("æ³¨å†Œè´¦å·")]),_:1},8,["onClick"])]),_:1}),d(b,{class:"tips-section"},{default:s(()=>[d(_,{class:"tips-text"},{default:s(()=>[u("ğŸ’¡ é»˜è®¤è´¦å·ï¼šuser / å¯†ç ï¼š123456")]),_:1})]),_:1})]),_:1})]),_:1}),d(b,{class:"footer-text"},{default:s(()=>[d(_,null,{default:s(()=>[u("By HAISNAP")]),_:1})]),_:1})]),_:1})}],["__scopeId","data-v-8b20a799"]]);export{_ as default};
